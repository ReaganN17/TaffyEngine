#include "../../../include/handlers/sprites/TextSprite.h"

TextSprite::TextSprite() {
	text = "";
}

TextSprite::TextSprite(std::string text) : text(text) {

}

TextSprite::TextSprite(std::string text, u32 text_color, u32 highlight_color)
	: text(text), text_color(text_color), highlight_color(highlight_color) {

}

void TextSprite::load() {
	
	if (isLoaded()) unload();

	sprite_image.createEmpty(0, 0, 1);

	std::vector<Image*> lines;
	
	Image* cur_line = new Image(0, 0, 1);
	lines.push_back(cur_line);

	for (char c : text) {
		if (c == 10) {
			cur_line = new Image(0, 0, 1);
			lines.push_back(cur_line);
		}
		else {
			cur_line->combineTR(character_map[c]);

			Image char_space(1, 6, 1);
			cur_line->combineTR(char_space);
		}
	}

	for (auto line : lines) {
		sprite_image.combineBL(*line);

		Image line_space(1, 1, 1);
		sprite_image.combineBL(line_space);

		line->~Image();
		line = nullptr;
	}
	
	lines.clear();

	sprite_image.replace(0xff000000, highlight_color);
	sprite_image.replace(0xff010101, text_color);
}

void TextSprite::unload() {
	if (!isLoaded()) { return; }
	delete[] sprite_image.data;
	sprite_image.data = NULL;
}

//fun fun fun
std::map<char, Image> TextSprite::character_map =
{
	{ ' ', Image(3, 6, 1, new u8[18]{
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0}) }, 

	{ '!', Image(1, 6, 1, new u8[6]{
		1,
		1,
		1,
		1,
		0,
		1}) },

	{ '"', Image(3, 6, 1, new u8[18]{
		1, 0, 1,
		1, 0, 1,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0}) },

	{'#', Image(5, 6, 1, new u8[30] {
		0, 1, 0, 1, 0,
		1, 1, 1, 1, 1,
		0, 1, 0, 1, 0,
		0, 1, 0, 1, 0,
		1, 1, 1, 1, 1,
		0, 1, 0, 1, 0 }) },

	{ '$', Image(5, 6, 1, new u8[30] {
		0, 1, 1, 1, 0,
		1, 0, 1, 0, 1,
		0, 1, 1, 0, 0,
		0, 0, 1, 1, 0,
		1, 0, 1, 0, 1,
		0, 1, 1, 1, 0}) },

	{ '%', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		0, 0, 1, 0,
		0, 0, 1, 0,
		0, 1, 0, 0,
		0, 1, 0, 0,
		1, 0, 0, 1}) },

	{ '&', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 1, 0, 0,
		0, 1, 1, 1,
		1, 0, 1, 0,
		0, 1, 0, 1}) },

	{ '\`', Image(1, 6, 1, new u8[6] {
		1,
		1,
		0,
		0,
		0,
		0}) },

	{ '(', Image(2, 6, 1, new u8[12] {
		0, 1,
		1, 0,
		1, 0,
		1, 0,
		1, 0,
		0, 1}) },

	{ ')', Image(2, 6, 1, new u8[12] {
		1, 0,
		0, 1,
		0, 1,
		0, 1,
		0, 1,
		1, 0}) },

	{ '*', Image(3, 6, 1, new u8[18] {
		0, 1, 0,
		1, 1, 1,
		0, 1, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0}) },

	{ '+', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 1, 0,
		1, 1, 1,
		0, 1, 0,
		0, 0, 0}) },

	{ ',', Image(1, 6, 1, new u8[6] {
		0,
		0,
		0,
		0,
		1,
		1}) },

	{ '-', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 1, 1,
		0, 0, 0,
		0, 0, 0}) },

	{ '.', Image(1, 6, 1, new u8[6] {
		0,
		0,
		0,
		0,
		0,
		1}) },

	{ '/', Image(3, 6, 1, new u8[18] {
		0, 0, 1,
		0, 0, 1,
		0, 1, 0,
		0, 1, 0,
		1, 0, 0,
		1, 0, 0}) },

	{'0', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 1, 1,
		1, 1, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{ '1', Image(3, 6, 1, new u8[18] {
		0, 0, 1,
		0, 1, 1,
		1, 0, 1,
		0, 0, 1,
		0, 0, 1,
		0, 0, 1}) },

	{'2', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 0, 0, 1,
		0, 1, 1, 0,
		1, 0, 0, 0,
		1, 1, 1, 1 }) },

	{'3', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 0, 1, 0,
		0, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{'4', Image(4, 6, 1, new u8[24] {
		0, 0, 1, 1,
		0, 1, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 1,
		0, 0, 0, 1,
		0, 0, 0, 1 }) },

	{'5', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 1,
		1, 0, 0, 0,
		1, 1, 1, 0,
		0, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{'6', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 0,
		1, 1, 1, 0,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{'7', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 0,
		0, 0, 0, 1,
		0, 0, 1, 0,
		0, 1, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 0 }) },

	{'8', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{'9', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 1, 1, 1,
		0, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0 }) },

	{ ':', Image(1, 6, 1, new u8[6]{
		0,
		1,
		0,
		0,
		1,
		0}) },

	{ ';', Image(1, 6, 1, new u8[6]{
		0,
		1,
		0,
		0,
		1,
		1}) },

	{ '<', Image(4, 6, 1, new u8[24] {
		0, 0, 0, 0,
		0, 0, 1, 1,
		0, 1, 0, 0,
		1, 0, 0, 0,
		0, 1, 0, 0,
		0, 0, 1, 1}) },

	{ '=', Image(4, 6, 1, new u8[24] {
		0, 0, 0, 0,
		0, 0, 0, 0,
		1, 1, 1, 1,
		0, 0, 0, 0,
		1, 1, 1, 1,
		0, 0, 0, 0}) },

	{ '>', Image(4, 6, 1, new u8[24] {
		0, 0, 0, 0,
		1, 1, 0, 0,
		0, 0, 1, 0,
		0, 0, 0, 1,
		0, 0, 1, 0,
		1, 1, 0, 0}) },

	{ '?', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 0, 0, 1,
		0, 1, 1, 0,
		0, 0, 0, 0,
		0, 1, 0, 0}) },

	{ '@', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 1, 1,
		1, 0, 1, 1,
		1, 0, 0, 0,
		0, 1, 1, 1}) },

	{'A', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 1,
		1, 0, 0, 1,
		1, 0, 0, 1 }) },

	{'B', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 0}) },

	{'C', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{'D', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 0}) },

	{'E', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 1,
		1, 0, 0, 0,
		1, 1, 1, 0,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 1, 1, 1}) },

	{'F', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 1,
		1, 0, 0, 0,
		1, 1, 1, 0,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 0}) },

	{'G', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 0,
		1, 0, 1, 1,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{'H', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1}) },

	{'I', Image(3, 6, 1, new u8[18] {
		1, 1, 1,
		0, 1, 0,
		0, 1, 0,
		0, 1, 0,
		0, 1, 0,
		1, 1, 1}) },

	{'J', Image(4, 6, 1, new u8[24] {
		0, 0, 0, 1,
		0, 0, 0, 1,
		0, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{'K', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 0, 1, 0,
		1, 1, 0, 0,
		1, 0, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1}) },

	{'L', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 0, 0, 0,
		1, 1, 1, 1}) },

	{'M', Image(5, 6, 1, new u8[30] {
		1, 0, 0, 0, 1,
		1, 1, 0, 1, 1,
		1, 0, 1, 0, 1,
		1, 0, 0, 0, 1,
		1, 0, 0, 0, 1,
		1, 0, 0, 0, 1}) },

	{'N', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 1, 0, 1,
		1, 0, 1, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1}) },

	{'O', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{'P', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 0,
		1, 0, 0, 0,
		1, 0, 0, 0}) },

	{'Q', Image(5, 6, 1, new u8[30] {
		0, 1, 1, 0, 0,
		1, 0, 0, 1, 0,
		1, 0, 0, 1, 0,
		1, 0, 0, 1, 0,
		1, 0, 0, 1, 0,
		0, 1, 1, 1, 1}) },

	{ 'R', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1}) },

	{ 'S', Image(4, 6, 1, new u8[24] {
		0, 1, 1, 0,
		1, 0, 0, 1,
		0, 1, 0, 0,
		0, 0, 1, 0,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{ 'T', Image(5, 6, 1, new u8[30] {
		1, 1, 1, 1, 1,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0}) },

	{ 'U', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 1, 1, 1}) },

	{ 'V', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0}) },

	{'W', Image(5, 6, 1, new u8[30] {
		1, 0, 0, 0, 1,
		1, 0, 0, 0, 1,
		1, 0, 0, 0, 1,
		1, 0, 1, 0, 1,
		1, 0, 1, 0, 1,
		0, 1, 0, 1, 0}) },

	{ 'X', Image(4, 6, 1, new u8[24] {
		1, 0, 0, 1,
		1, 0, 0, 1,
		0, 1, 1, 0,
		1, 0, 0, 1,
		1, 0, 0, 1,
		1, 0, 0, 1}) },

	{'Y', Image(5, 6, 1, new u8[30] {
		1, 0, 0, 0, 1,
		1, 0, 0, 0, 1,
		0, 1, 0, 1, 0,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0,
		0, 0, 1, 0, 0}) },

	{ 'Z', Image(4, 6, 1, new u8[24] {
		1, 1, 1, 1,
		0, 0, 0, 1,
		0, 0, 1, 0,
		0, 1, 0, 0,
		1, 0, 0, 0,
		1, 1, 1, 1}) },

	{ '[', Image(2, 6, 1, new u8[12] {
		1, 1,
		1, 0,
		1, 0,
		1, 0,
		1, 0,
		1, 1}) },

	{ '\\', Image(3, 6, 1, new u8[18] {
		1, 0, 0,
		1, 0, 0,
		0, 1, 0,
		0, 1, 0,
		0, 0, 1,
		0, 0, 1}) },

	{ ']', Image(2, 6, 1, new u8[12] {
		1, 1,
		0, 1,
		0, 1,
		0, 1,
		0, 1,
		1, 1}) },

	{ '^', Image(3, 6, 1, new u8[18] {
		0, 1, 0,
		1, 0, 1,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0}) },

	{ '_', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 1, 1}) },

	{ '`', Image(2, 6, 1, new u8[12] {
		1, 0,
		0, 1,
		0, 0,
		0, 0,
		0, 0,
		0, 0}) },

	{'a', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		0, 1, 1,
		1, 0, 1,
		1, 1, 1}) },

	{'b', Image(3, 6, 1, new u8[18] {
		1, 0, 0,
		1, 0, 0,
		1, 1, 1,
		1, 0, 1,
		1, 0, 1,
		1, 1, 1}) },

	{'c', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 1, 1,
		1, 0, 0,
		1, 0, 0,
		0, 1, 1}) },

	{'d', Image(3, 6, 1, new u8[18] {
		0, 0, 1,
		0, 0, 1,
		1, 1, 1,
		1, 0, 1,
		1, 0, 1,
		1, 1, 1}) },

	{'e', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		1, 1, 1,
		1, 0, 1,
		1, 1, 1,
		1, 0, 0,
		1, 1, 1}) },

	{'f', Image(3, 6, 1, new u8[18] {
		0, 1, 1,
		1, 0, 0,
		1, 1, 1,
		1, 0, 0,
		1, 0, 0,
		1, 0, 0}) },

	{'g', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		1, 1, 1,
		1, 0, 1,
		1, 1, 1,
		0, 0, 1,
		1, 1, 1}) },

	{'h', Image(3, 6, 1, new u8[18] {
		1, 0, 0,
		1, 0, 0,
		1, 0, 0,
		1, 1, 1,
		1, 0, 1,
		1, 0, 1,}) },

	{'i', Image(2, 6, 1, new u8[12] {
		0, 0,
		0, 0,
		1, 0,
		0, 0,
		1, 0,
		1, 1}) },

	{'j', Image(2, 6, 1, new u8[12] {
		0, 0,
		0, 1,
		0, 0,
		0, 1,
		0, 1,
		1, 1}) },

	{'k', Image(3, 6, 1, new u8[18] {
		1, 0, 0,
		1, 0, 0,
		1, 0, 1,
		1, 1, 0,
		1, 0, 1,
		1, 0, 1}) },

	{'l', Image(2, 6, 1, new u8[12] {
		1, 0,
		1, 0,
		1, 0,
		1, 0,
		1, 0,
		1, 1}) },

	{'m', Image(5, 6, 1, new u8[30] {
		0, 0, 0, 0, 0,
		0, 0, 0, 0, 0,
		0, 0, 0, 0, 0,
		1, 1, 0, 1, 1,
		1, 0, 1, 0, 1,
		1, 0, 0, 0, 1}) },

	{'n', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 1, 0,
		1, 0, 1,
		1, 0, 1}) },

	{'o', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 1, 1,
		1, 0, 1,
		1, 1, 1}) },

	{'p', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		1, 1, 0,
		1, 0, 1,
		1, 1, 1,
		1, 0, 0,
		1, 0, 0}) },

	{'q', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 1, 1,
		1, 0, 1,
		1, 1, 1,
		0, 0, 1,
		0, 0, 1}) },

	{ 'r', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 1, 1,
		1, 0, 0,
		1, 0, 0}) },

	{ 's', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 1, 1,
		1, 0, 0,
		0, 1, 0,
		0, 0, 1,
		1, 1, 0}) },

	{ 't', Image(3, 6, 1, new u8[18] {
		0, 1, 0,
		0, 1, 0,
		1, 1, 1,
		0, 1, 0,
		0, 1, 0,
		0, 1, 0}) },

	{ 'u', Image(3, 6, 1, new u8[18] {
		0, 0, 0, 
		0, 0, 0, 
		0, 0, 0, 
		1, 0, 1,
		1, 0, 1,
		1, 1, 1}) },

	{ 'v', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		0, 0, 0,
		0, 0, 0,
		1, 0, 1, 
		1, 0, 1,
		0, 1, 0}) },

	{'w', Image(5, 6, 1, new u8[30] {
		0, 0, 0, 0, 0,
		0, 0, 0, 0, 0,
		0, 0, 0, 0, 0,
		1, 0, 0, 0, 1,
		1, 0, 1, 0, 1,
		0, 1, 0, 1, 0}) },

	{ 'x', Image(3, 6, 1, new u8[18] {
		0, 0, 0, 
		0, 0, 0, 
		0, 0, 0, 
		1, 0, 1, 
		0, 1, 0,
		1, 0, 1}) },

	{'y', Image(3, 6, 1, new u8[18] {
		0, 0, 0,
		1, 0, 1,
		1, 0, 1,
		0, 1, 0, 
		0, 1, 0,
		1, 0, 0}) },

	{ 'z', Image(3, 6, 1, new u8[18] {
		0, 0, 0, 
		1, 1, 1, 
		0, 0, 1, 
		0, 1, 0, 
		1, 0, 0, 
		1, 1, 1}) },

	{ '{', Image(3, 6, 1, new u8[18] {
		0, 0, 1, 
		0, 1, 0, 
		1, 1, 0, 
		1, 1, 0, 
		0, 1, 0, 
		0, 0, 1}) },

	{ '|', Image(1, 6, 1, new u8[6] {
		1,  
		1, 
		1,
		1,
		1, 
		1}) },

	{ '}', Image(3, 6, 1, new u8[18] {
		1, 0, 0, 
		0, 1, 0, 
		0, 1, 1, 
		0, 1, 1, 
		0, 1, 0, 
		1, 0, 0}) },

	{ '~', Image(3, 6, 1, new u8[18] {
		0, 0, 0, 
		0, 0, 0, 
		0, 1, 1, 
		1, 0, 0, 
		0, 0, 0, 
		0, 0, 0}) },

};
